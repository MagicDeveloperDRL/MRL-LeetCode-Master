# 【C++】vector
[TOC]

vector 是可变长的动态数组，支持随机访问迭代器，所有STL算法都能对 vector 进行操作。要使用 vector，需要包含如下头文件和命名空间。

```c++
#include <vector>
using namespace std;
```

## 一、常用函数

### 1、初始化方式

| 使用需求                                                     | 使用样例                               |
| ------------------------------------------------------------ | -------------------------------------- |
| 构建一个空的vector                                           | vector<int> A;                         |
| 构建一个含有n个元素的vector                                  | vector<int> A(26);                     |
| 构建一个含有n个元素、每个元素都是val的vector                 | vector<int> A(26, 0);                  |
| 使用某个vector的区间[first, last)构造一个新的vector，用来裁剪vector | vector<int> B(A.begin(), A.begin()+5); |
| 构建一个含有指定元素的vector                                 | vector<int> A = {2, 3, 4};             |

### 2、容器大小

| 成员函数     | 函数功能                   |
| ------------ | -------------------------- |
| int size()   | 返回容器对象中元素的个数。 |
| bool empty() | 判断容器对象是否为空       |

### 3、添加操作

| 成员函数                                                    | 函数功能                                                     |
| ----------------------------------------------------------- | ------------------------------------------------------------ |
| void push_back( const T & val)                              | 将 val 添加到容器末尾                                        |
| iterator insert(iterator i, const T & val)                  | 将 val 插入迭代器 i 指向的位置，返回 i                       |
| iterator insert( iterator i, iterator first, iterator last) | 将其他容器上的区间 [first, last) 中的元素插入迭代器 i 指向的位置 |

### 4、删除操作

| 成员函数                                     | 函数功能                                                    |
| -------------------------------------------- | ----------------------------------------------------------- |
| void clear()                                 | 删除所有元素                                                |
| void pop_back()                              | 删除容器末尾的元素                                          |
| iterator erase(iterator i)                   | 删除迭代器 i 指向的元素，返回值是被删元素后面的元素的迭代器 |
| terator erase(iterator first, iterator last) | 删除容器中的区间 [first, last)                              |

### 5、获取操作

| 成员函数    | 函数功能                     |
| ----------- | ---------------------------- |
| T & front() | 返回容器中第一个元素的引用   |
| T & back()  | 返回容器中最后一个元素的引用 |

## 二、常见操作

### 1、遍历操作

#### （1）带下标遍历元素

```c++
for (int i =0; i<A.size(); i++) {  
    cout << A[i] << " ";  
}
```

#### （2）直接遍历元素

```c++
//方式一
for (int x:A) {  
    cout <<x<< " ";  
}
//方式二
for (auto x:A) {  
    cout <<x<< " ";  
}
```

#### （3）用迭代器遍历

```c++
//方式一：正向迭代器(从前向后遍历)
for (list<int>::iterator i = v.begin(); i != v.end(); i++) {  //用迭代器遍历容器
    cout << *i << " ";  //*i 就是迭代器i指向的元素
}
//方式二：正向迭代器(从前向后遍历)
for (auto i = v.begin(); i != v.end(); i++) {  //用迭代器遍历容器
    cout << *i << " ";  //*i 就是迭代器i指向的元素
}
//方式一：反向迭代器(从后向前遍历)
for (list<int>::reverse_iterator i = v.rbegin(); i != v.rend(); i++) {  
    cout << *i << " ";  //*i 就是迭代器i指向的元素
}
//方式二：反向迭代器(从后向前遍历)
for (auto i = v.rbegin(); i != v.rend(); i++) {  //用迭代器遍历容器
    cout << *i << " ";  //*i 就是迭代器i指向的元素
}
```

### 2、排序操作

```c++
sort(A.begin(), A.end()); // 将A从小到大排序
```

这里的sort来自STL中的算法模板

### 3、反向操作

```c++
reverse(A.begin(), A.end();  //将A前后颠倒
```

这里的reverse来自STL中的算法模板

## 三、内存特点

### 1、支持高效地随机存取

在 vector 容器中，根据下标随机访问某个元素的时间是常数。在 vector 容器中，用一个动态分配的数组来存放元素，因此根据下标访问某个元素的时间是固定的，与元素个数无关。

在尾部添加一个元素的时间大多数情况下也是常数，总体来说速度很快。

vector 容器在实现时，动态分配的存储空间一般都大于存放元素所需的空间。例如，哪怕容器中只有一个元素，也会分配 32 个元素的存储空间。这样做的好处是，在尾部添加一个新元素时不必重新分配空间，直接将新元素写入适当位置即可。在这种情况下，添加新元素的时间也是常数。但是，如果不断添加新元素，多出来的空间就会用完，此时再添加新元素，就不得不重新分配内存空间，把原有内容复制过去后再添加新的元素。碰到这种情况，添加新元素所花的时间就不是常数，而是和数组中的元素个数成正比。

### 2、不支持高效地插入和移动

在中间插入或删除元素时，因为要移动多个元素，因此速度较慢，平均花费的时间和容器中的元素个数成正比。

至于在中间插入或删除元素，必然涉及元素的移动，因此时间不是固定的，而是和元素个数有关。
